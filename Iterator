Паттерны проектирования
=======================

Автор: Вахрушев Михаил

Паттерн Итератор (Iterator)
---------------------------

Итератор – это поведенческий паттерн. Его цель – позволить вам обходить элементы коллекции, не раскрывая ее базовое представление.

**Назначение:**

*   для доступа к содержимому агрегированных объектов без раскрытия их внутреннего представления;
*   для поддержки нескольких активных обходов одного и того же агрегированного объекта (желательно, но не обязательно);
*   для предоставления единообразного интерфейса с целью обхода различных агрегированных структур.

В итоге мы получаем разделение ответственности: клиенты получают возможность работать с разными коллекциями унифицированным образом, а коллекции становятся проще за счет того, что делегируют перебор своих элементам другой сущности.

**Существуют два вида итераторов, внешний и внутренний.**

Внешний итератор — это классический (pull-based) итератор, когда процессом обхода явно управляет клиент путем вызова метода Next

Внутренний итератор — это push-based-итератор, которому передается callback функция, и он сам уведомляет клиента о получении следующего элемента.

Классическая диаграмма паттерна “Итератор”, как она описана в небезызвестной книги «банды четырех»:

![](https://habrastorage.org/getpro/habr/post_images/7a1/e92/c3d/7a1e92c3d6fbd859de3d9e967d4f8a74.gif)

Чтобы реализовать итератор в Python, у нас есть два возможных варианта:

1.  Реализовать в классе специальные методы\_\_iter\_\_ и \_\_next\_\_.
2.  Использовать генераторы.

**Примеры использования**

*   Коллекция имеет сложную структуру. Необходимо скрыть ее от клиента из соображений удобства или безопасности;
*   Требуется сократить дублирование обходного кода по всему приложению;
*   Обход элементов различных структур данных;
*   Изначально неизвестны детали структуры данных.

### Примеры кода

```Python    
    Colors = ["red", "black", "green"]
    
    ColorsIters = iter(colors)
    try:
        print(next(ColorsIter))
        print(next(ColorsIter))
        print(next(ColorsIter))
        
    exept StopIterations:
        print("другие элементы отсутствуют")
    

    
    Colors = ["red", "black", "green"]
    
    ColorsIters = iter(colors)
    
    While True:
        try:
            print(next(ColorsIter))
        exept StopIterations:
            break
```
